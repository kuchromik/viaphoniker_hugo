{{ define "main" }}

{{ $update := .Page.Date }}
{{ $subtitle := .Params.subtitle }}
{{ $featured_video := .Params.featured_video }}
{{ $featured_link := .Params.featured_link }}

<main>
    <article>
        <header>
            <h1 class="featured-title">{{ .Page.Title }}</h1>
            <h4 class="featured-subtitle">{{ $subtitle }}</h4>
        </header>
        <!-- "{{.Content}}" pulls from the markdown content of the corresponding _index.md -->
        {{ .Content }}
        <br>
    </article>

    {{ if (and ( .Params.featured_video ) ( .Params.featured_image )) }}
        <div class="retrobox">
            {{ $imagePath := printf "/img/%s" .Params.featured_image }}
            {{ $image := resources.Get $imagePath }}
            <video controls poster="{{ $image.RelPermalink }}" src="{{ $featured_video }}"></video>
        </div>
    {{ else if ( .Params.featured_video ) }}
        <div class="retrobox">
            <video controls src="{{ $featured_video }}"></video>
        </div>
    {{ else if (and ( .Params.featured_image ) ( .Params.featured_link )) }}
        <div class="retrobox">
            {{ $imagePath := printf "/img/%s" .Params.featured_image }}
            {{ $image := resources.Get $imagePath }}
            <a href="{{ $featured_link }}" target="_blank">
                <img src="{{ $image.RelPermalink }}"/>
            </a>
        </div>
    {{ else if ( .Params.featured_image ) }}
        <div class="retrobox">
            {{ $imagePath := printf "/img/%s" .Params.featured_image }}
            {{ $image := resources.Get $imagePath }}
            <img class="fade-in" src="{{ $image.RelPermalink }}" alt="Image">
        </div>
    {{ end }}
    {{ if ( .Params.featured_text ) }}
        <div class="retrobox">
            <h4 class="featured-text">{{ .Params.featured_text }}</h4>
        </div>
    {{ end }}
    <hr>
</main>

<small class="text-muted">Letzte Aktualisierung {{ .Lastmod | time.Format ":date_medium" }}</small>


{{ end }}

